# Timelapse Project

This project contains scripts and resources for creating and analyzing timelapse videos, primarily focusing on plant growth and sourdough starter volume changes. The project uses a Raspberry Pi (Zero 2 W) and Arduino Uno for capturing and processing data, alongside Python scripts for analysis and visualization.

---

## Project Overview
The `timelapse-project` repository supports:
- **Image Capture:** Automated photo capture with the Raspberry Pi and data logging (e.g., temperature and humidity).
- **Image Processing:** Detection and analysis of features such as bubbles in liquids and changes in volume.
- **Timelapse Video Creation:** Combining captured images into videos with graphical overlays.
- **Data Analysis:** Plotting metrics like temperature, humidity, and bubble count over time.

---

## Repository Structure
The repository is organized as follows:

```
timelapse-project/
├── scripts/                  # Python scripts for image processing and timelapse creation
│   ├── bubbles_and_height.py       # Script for measuring starter height and counting bubbles
│   ├── timelapse_animation.py      # Script to create timelapse videos with overlays
│   ├── timelapse_capture_images_and_data.py  # Script to capture images and log data
├── images/                   # Directory containing raw example images
├── processed_images/         # Directory containing processed example images
├── data_log.csv              # Example temperature and humidity data
├── combined_starter_data.csv # Example combined output data
├── README.md                 # Project documentation (this file)
├── .gitignore                # File to exclude unnecessary items from the repository
```

---

## Installation
### Prerequisites
1. **Hardware:**
   - Raspberry Pi (Zero 2 W or similar)
   - Arduino Uno
   - DHT11 Temperature and Humidity Sensor
   - Camera module (compatible with Raspberry Pi)
   - Jumper wires, breadboard, and a 10kΩ resistor (optional)

2. **Software:**
   - Python 3.7+
   - Git
   - Required Python libraries (see `requirements.txt`)

### Setup
1. **Clone the Repository:**
   ```bash
   git clone https://github.com/gitpkj/timelapse-project.git
   cd timelapse-project
   ```

2. **Set Up the Virtual Environment:**
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

3. **Configure Hardware:**

#### Arduino Setup: Capturing Temperature and Humidity (DHT11)
This project uses an Arduino Uno and a DHT11 sensor to capture temperature and humidity data. Follow these steps to wire and program the Arduino:

1. **Wiring Diagram:**
   | DHT11 Pin | Arduino Pin | Description         |
   |-----------|-------------|---------------------|
   | VCC       | 5V          | Power to the sensor |
   | GND       | GND         | Ground connection   |
   | DATA      | Pin 2       | Data output         |

   - Connect the **VCC** pin of the DHT11 to the Arduino's **5V** pin.
   - Connect the **GND** pin of the DHT11 to the Arduino's **GND** pin.
   - Connect the **DATA** pin of the DHT11 to **Digital Pin 2** on the Arduino.
   - Add a pull-up resistor (10kΩ) between the DATA and VCC pins for stable readings (optional).

2. **Arduino Code:**
   Upload this code to the Arduino to send temperature and humidity data via serial:

   ```cpp
   #include "DHT.h"

   #define DHTPIN 2     // Pin where the DHT11 data pin is connected
   #define DHTTYPE DHT11   // DHT11 sensor type

   DHT dht(DHTPIN, DHTTYPE);

   void setup() {
     Serial.begin(9600);
     dht.begin();
     Serial.println("DHT11 sensor setup complete.");
   }

   void loop() {
     float temperature = dht.readTemperature(); // Read temperature in Celsius
     float humidity = dht.readHumidity();      // Read humidity

     if (isnan(temperature) || isnan(humidity)) {
       Serial.println("Failed to read from DHT sensor!");
       return;
     }

     Serial.print(temperature);
     Serial.print(",");
     Serial.println(humidity);

     delay(2000); // Wait 2 seconds between readings
   }
   ```

3. **Test the Setup:**
   - Open the **Serial Monitor** in the Arduino IDE (Tools > Serial Monitor) and set the baud rate to **9600**.
   - You should see temperature and humidity readings in the format: `temperature,humidity`.

---

## Usage
### Example Data
This repository includes example data for testing the scripts:
- **`images/`:** Contains a subset of raw images for testing.
- **`processed_images/`:** Contains processed images generated by the script.
- **`data_log.csv`:** Contains sample temperature and humidity data.
- **`combined_starter_data.csv`:** Combined data generated from the example images and logs.

Use these files to test the scripts without setting up your own environment.

### Running the Scripts
1. **Capture Images and Data:**  
   Run `timelapse_capture_images_and_data.py` to capture images and log data:
   ```bash
   python3 scripts/timelapse_capture_images_and_data.py
   ```

2. **Analyze Starter Height and Bubbles:**  
   Run `bubbles_and_height.py` to measure starter height and count bubbles:
   ```bash
   python3 scripts/bubbles_and_height.py
   ```

3. **Create a Timelapse Video:**  
   Run `timelapse_animation.py` to create a timelapse video with graphical overlays:
   ```bash
   python3 scripts/timelapse_animation.py
   ```

---

## Contributing
If you'd like to contribute:
1. Fork this repository.
2. Create a new branch (`git checkout -b feature/your-feature`).
3. Commit your changes (`git commit -m 'Add your feature'`).
4. Push to the branch (`git push origin feature/your-feature`).
5. Open a pull request.

---

## Known Issues
1. **Large Files:** Ensure `.tar.gz` and virtual environment files (`venv/`) are excluded from Git using `.gitignore`.
2. **Performance:** Processing large numbers of images may require sufficient memory and CPU resources.

---

## Acknowledgments
- Inspired by Raspberry Pi and Arduino projects for time-lapse photography and data visualization.

